function openNewTab(n,t){return window.open(n,t)}preventIndependentOpen=()=>{"localhost"===window.location.hostname||window.opener||(window.location.href="/")};const signingKey="Flowgramming",fnSigningKey="FlowgrammingFunction";function saveFlowChart(){switchContext();saveFile("Untitled.fgmin",JSON.stringify(JSON.decycle({signingKey:signingKey,contexts:contexts})))}function downloadFunction(n){window.opener.switchContext();const t=n+".fgfn";if(n in window.opener.getCurrentContexts()){let e={[n]:window.opener.getCurrentContexts()[n]};saveFile(t,JSON.stringify(JSON.decycle({signingKey:fnSigningKey,contexts:e})),"save-"+n)}}function importFlowGram(n){try{const t=JSON.retrocycle(JSON.parse(n));if(t.signingKey!==signingKey)return void swal("Flowgramming doesn't support that file!");contexts=t.contexts,currentContextName="main",graph.fromJSON(contexts[currentContextName].graph),paper.fitToContent({padding:20,minWidth:paperColumn.width(),minHeight:paperColumn.height(),gridWidth:10,gridHeight:10}),start=findModel(contexts[currentContextName].start.id),updateContextsDropdown()}catch(n){swal("Something went wrong!")}finally{clearChat(),renderProgram("Start Flowgramming!"),hideLoader()}}function importFunction(n){try{const t=JSON.retrocycle(JSON.parse(n));if(t.signingKey!==fnSigningKey)return void swal("Not a flowgramming function!");Object.keys(t.contexts).forEach(n=>{addFunctionToTable(n)}),parentWindowContexts={...parentWindowContexts,...t.contexts},window.opener.addNewContext(t.contexts)}catch(n){swal("Something went wrong!")}finally{hideLoader()}}function openFromFile(n,t=!1){showLoader("Importing","Please wait while your flowgram is imported"),setTimeout(()=>{t?importFunction(n):importFlowGram(n)},1e3)}