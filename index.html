<!DOCTYPE html>
<html lang="en">
<head>
    <title>Flowgramming | CORE Lab</title>
    <link href="manifest.json" rel="manifest">
    <meta content="white" name="theme-color"/>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/popper.js"></script>
    <script src="js/vendor/bootstrap.js"></script>
    <script src="js/vendor/handlebars.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/vendor/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/vendor/joint.css"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="stylesheet" type="text/css" href="css/chat.css"/>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Flowgramming</a>
    <div class="navbar-nav">
        <input accept=".fgmin" hidden id="open-file" type="file"/>
        <a id="open-btn" class="nav-item nav-link" href="#">Open</a>
        <a id="save-btn" class="nav-item nav-link" href="#">Save</a>
        <a class="nav-item nav-link" href="#" id="run-btn">Run</a>
    </div>
</nav>

<div class="myrow">
    <div class="paperColumn">
        <div class="menudiv">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <p style="padding: 5px">
                            <a href="#" class="btn btn-sq-sm" id="zoomin">
                                <img src="assets/zoomin.svg" width="35px" height="35px" align="center"/>
                            </a>
                            <a href="#" class="btn btn-sq-sm" id="zoomout">
                                <img src="assets/zoomout.png" width="35px" height="35px" align="center"/>
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div id="myHolder" style="transform-origin:0 0;"></div>
    </div>
    <div class="chatcol" style="background-color: #0b2">
        <div class="chat">
            <div class="chat-history">
                <ul style="list-style-type:none">
                </ul>
            </div> <!-- end chat-history -->
            <div class="chat-message clearfix">
                    <textarea name="message-to-send" id="message-to-send" placeholder="Type your message"
                              rows="3"></textarea>
                <button id="chatsend">Send</button>
            </div> <!-- end chat-message -->
        </div> <!-- end chat -->
    </div> <!-- end container -->
</div>


<div class="modal fade" id="modal" role="dialog">
    <div class="modal-dialog modal-sm vertical-align-center">
        <div class="modal-content">
            <div class="modal-body">
                <input onclick="addIF()" type="image" src="./assets/if.png" />
                <input onclick="addInput()" type="image" src="./assets/input.png" />
                <input onclick="addOutput()" type="image" src="./assets/output.png" />
                <input onclick="addAssignment()" type="image" src="./assets/assignment.png" />
                <input onclick="addDeclaration()" type="image" src="./assets/declaration.jpg" />
            </div>
            <div class="modal-footer">
                <button id="closebtn" type="button" class="btn" data-dismiss="modal">Close</button>
                <button class="btn" id="okButton" type="button">OK</button>
            </div>
        </div>
    </div>
</div>
<script id="message-template" type="text/x-handlebars-template">
    <li class="clearfix">
        <div class="message-data align-right">
            &nbsp; &nbsp;
            <span class="message-data-name">You</span> <i class="fa fa-circle me"></i>
        </div>
        <div class="message other-message float-right">
            {{messageOutput}}
        </div>
    </li>
</script>

<script id="message-response-template" type="text/x-handlebars-template">
    <li>
        <div class="message-data">
            <span class="message-data-name"><i class="fa fa-circle online"></i> CodeBot</span>

        </div>
        <div class="message my-message">
            {{response}}
        </div>
    </li>
</script>

</body>
<script src="js/chat.js"></script>
<script src="js/vendor/lodash.js"></script>
<script src="js/vendor/backbone.js"></script>
<script src="js/vendor/cycle.js"></script>
<script src="js/vendor/joint.js"></script>
<script src="js/vendor/require.js"></script>
<script src="js/main.js"></script>
<script src="js/utility.js"></script>
<script src="js/addElement.js"></script>
<script src="js/run.js"></script>
<script src="js/events.js"></script>
<script src="js/save.js"></script>
<script>
  let element = $('#myHolder')
  let zoomArr = [0.5,0.75,0.85,0.9,1,1.2,1.5]
  let indexOfArr = 4

  $('#zoomin').on('click', function () {
    if (indexOfArr < zoomArr.length - 1) {
      element.css('transform', `scale(${zoomArr[++indexOfArr]})`)
    }
  })

  $('#zoomout').on('click', function () {
    if (indexOfArr > 0) {
      element.css('transform', `scale(${zoomArr[--indexOfArr]})`)
    }
  })

  $('#run-btn').on('click', function () {
    run()
  })

  $('#save-btn').on('click', function () {
    saveFlowChart()
  })

  $('#open-btn').on('click', function () {
    $('#open-file').click()
  })

  $('#open-file').on('change', function () {
      const fileReader = new FileReader()
      fileReader.onload = function () {
        const data = fileReader.result
        openFromFile(data)
      }
      fileReader.readAsText($('#open-file').prop('files')[0])
    })
</script>

</html>
